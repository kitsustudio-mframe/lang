/**
 * Copyright (c) 2020 ZxyKira
 * All rights reserved.
 *
 * SPDX-License-Identifier: MIT
 */

/* ******************************************************************************
 * Include
 */
#include "./Object.h"

//-------------------------------------------------------------------------------
#include "mframe.h"

/* ******************************************************************************
 * Using
 */
using mframe::lang::Object;

//-------------------------------------------------------------------------------

/* ******************************************************************************
 * Variable <Static>
 */

/* ******************************************************************************
 * Construct Method
 */

//-------------------------------------------------------------------------------
Object::Object(void) {
  return;
}

//-------------------------------------------------------------------------------
Object::~Object(void) {
  return;
}

/* ******************************************************************************
 * Operator Method
 */

//-------------------------------------------------------------------------------
void* Object::operator new(size_t n) {
  void* result = ::operator new(n);
  if (result == nullptr)
    System::error("Object new", ErrorCode::INSUFFICIENT_MEMORY);

  return result;
}

//-------------------------------------------------------------------------------
void* Object::operator new(size_t n, void* const p) {
  return p;
}

/* ******************************************************************************
 * Public Method <Static>
 */

/* ******************************************************************************
 * Public Method <Override>
 */

/* ******************************************************************************
 * Public Method
 */

//-------------------------------------------------------------------------------
void Object::delay(int milliseconds) const {
  System::delay(milliseconds);
  return;
}

//-------------------------------------------------------------------------------
bool Object::equals(Object* object) const {
  if (object == nullptr)
    return false;

  return (this->hashcode() == object->hashcode());
}

//-------------------------------------------------------------------------------
bool Object::equals(Object& object) const {
  return (this->hashcode() == object.hashcode());
}

//-------------------------------------------------------------------------------
void Object::wait(void) const {
  System::wait(0);
  return;
}

//-------------------------------------------------------------------------------
bool Object::wait(int timeout) const {
  return System::wait(timeout);
}

//-------------------------------------------------------------------------------
bool Object::yield(void) const {
  return System::yield();
}

//-------------------------------------------------------------------------------
int Object::lock(void) const {
  return System::lock();
}

//-------------------------------------------------------------------------------
int Object::unlock(void) const {
  return System::unlock();
}

//-------------------------------------------------------------------------------
int Object::hashcode(void) const {
  return reinterpret_cast<int>(this);
}

//-------------------------------------------------------------------------------
mframe::lang::Thread* Object::currentThread(void) const {
  return System::currentThread();
}

/* **************************************************************************************
 * Public Method <Override> - mframe::lang::Interface
 */

//-------------------------------------------------------------------------------
mframe::lang::Object& Object::getObject(void) {
  return *this;
}

/* ******************************************************************************
 * Protected Method <Static>
 */

/* ******************************************************************************
 * Protected Method <Override>
 */

/* ******************************************************************************
 * Protected Method
 */

/* ******************************************************************************
 * Private Method
 */

/* ******************************************************************************
 * End of file
 */
